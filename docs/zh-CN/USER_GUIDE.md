# Obsidian 智能周报插件使用手册

## 一、功能概述
本插件提供以下核心功能：
1. **AI 智能周报生成** - 基于选定内容自动生成结构化周报
2. **多版本周报管理** - 支持同时维护多个版本对比
3. **实时编辑与保存** - 修改内容自动保存（500ms 延迟）
4. **一键插入编辑器** - 单击即可插入最终版本
5. **多语言支持** - 中英文双语界面切换
6. **智能文本分析** - 提供选中内容的AI理解和修改建议

## 二、安装步骤
### 自动安装
1. Obsidian 社区插件市场搜索 "Obsidian Cursor"
2. 点击安装并启用插件
3. 重启 Obsidian 生效

### 手动安装
```bash
将以下文件复制到 .obsidian/plugins/obsidian-cursor/：
- main.js
- manifest.json 
- styles.css
```

## 三、核心功能使用说明
### 1. 周报生成流程
1. 文本选择：在编辑器中选中需要生成周报的内容
2. 调出功能面板：
   ```bash
   Cmd/Ctrl+P → 输入 "Create Weekly Summary" → Enter
   ```
3. 初始生成：AI 生成的周报将显示在**左侧面板**

### 2. 双屏操作界面
![双屏界面示意图](/path/to/image.png)
- **布局特性**：
  - 左右分屏显示（原始版本 vs 重新生成版本）
  - 独立操作面板（每个版本单独控制）
- **界面元素**：
  - 🗙 关闭按钮：右上角红色图标
  - ⏳ 版本时间戳：`Version 2 (14:30:25)` 格式
  - ✅ 接受按钮：绿色按钮（每个面板独立）

### 3. 版本管理
| 操作         | 说明                          | 快捷键       |
|--------------|-------------------------------|-------------|
| 重新生成     | 点击顶部 Regenerate → 右侧更新 | Ctrl+Enter  |
| 版本对比     | 左右面板差异高亮显示          | --          |
| 删除版本     | 点击 Delete 移除当前版本      | Ctrl+Delete |

### 4. 内容编辑指南
```markdown
1. 进入编辑模式：双击任意面板内容
2. 支持格式：
   - **Markdown 语法**
   - HTML 标签
   - 自定义 CSS 类
3. 自动保存：停止输入 500ms 后自动保存
```

### 5. 文档插入流程
1. 选择目标版本（左/右面板）
2. 点击对应面板的 ✅ Accept 按钮
3. 系统将：
   - 插入内容到当前光标位置
   - 自动关闭面板
   - 保存所有修改

### 6. 文本分析建议
1. 文本选择：在编辑器中选中需要分析的段落
2. 调出分析面板：
   ```bash
   Cmd/Ctrl+P → 输入 "Analyze Text" → Enter
   ```
3. 分析结果展示：
   - **原文显示区**（可编辑修改）
   - **AI建议区**（包含修改建议和优化方案）
   - **快速操作按钮**：
     - ✅ 应用建议
     - ✏️ 按建议修改（自动整合建议生成新版）
     - 🔄 重新分析（分析期间禁用）
     - ✖️ 关闭面板

**交互状态**：
- 分析进行时显示加载动画
- 按钮禁用防止重复请求
- 修改原文时显示局部加载状态
- 支持中途取消（点击关闭按钮）

**操作流程**：
1. 点击 ✏️ 按钮发起修改请求
2. 原文区显示加载动画（建议区保持可见）
3. 获得修改结果后自动更新原文
4. 可重复修改直到满意

## 四、高级功能
### 1. 多语言切换
```javascript
// 设置路径：插件设置 → Language 选项
const config = {
  language: 'zh' // 可选值: 'zh'/'en'
}
```

### 2. API 配置
```yaml
# 自定义 API 端点配置
endpoint: "https://api.yourservice.com/v1"
headers:
  Authorization: "Bearer YOUR_API_KEY"
```

### 3. 对比模式
**启用方式**：长按 Regenerate 按钮 3 秒  
**特性**：
- 同时生成 3 个不同风格版本
- 三栏并列显示布局
- 版本标签颜色区分

## 五、注意事项
❗ **重要提示**：
1. 网络要求：必须保持互联网连接
2. 内容安全：建议人工审核 AI 生成内容
3. 数据存储：版本数据保存于 `IndexedDB`
4. 性能限制：单文档 ≤5000 字符
5. 界面限制：最大显示 3 个版本对比
6. 内存管理：超过 5 个版本自动归档
7. 文本分析限制：单次分析 ≤2000 字符
8. 网络要求：分析过程需要保持网络连接
9. 响应时间：通常 3-8 秒，超时自动取消

## 六、常见问题
<details>
<summary>Q1: 面板无法关闭怎么办？</summary>

**解决方案**：
- 按 ESC 键强制关闭
- 点击界面外区域
- 重启 Obsidian
</details>

<details>
<summary>Q2: 生成内容不理想如何处理？</summary>

**优化步骤**：
1. 调整输入文本详细程度
2. 使用 Regenerate 多次生成
3. 手动编辑优化内容
4. 检查 API 连接状态
</details>

## 七、版本历史
最新变更请查看 [CHANGELOG.md](CHANGELOG.md)，维护规范：
1. 所有功能修改必须关联 Issue 编号
2. 重大变更需在 Release Notes 说明迁移方案
3. 使用语义化版本号：
   - MAJOR 版本：不兼容的 API 修改
   - MINOR 版本：向下兼容的功能新增
   - PATCH 版本：向下兼容的问题修正

> **开源信息**：本插件遵循 MIT 协议，最新版本请访问 [GitHub 仓库](https://github.com/your-repo)。问题反馈请提交 issue 并附 console 日志。